let phpfusion_tables={init:function(c,d,b,a){phpfusion_tables.toggleRow();phpfusion_tables.applyFilter(a);phpfusion_tables.masterCheck();phpfusion_tables.quickEdit(c,d,b);phpfusion_tables.customBox()},customBox:function(){$("body").on("click",".custom-table",function(a){let target=$("#"+$(this).data("table")+"-custom-box");if(target.is(":visible")){target.slideUp(150);$(this).find(".caret").removeClass("caret-up")}else{target.slideDown(150);$(this).find(".caret").addClass("caret-up")}})},toggleRow:function(){$("button.toggle-row").bind("click",function(a){$(this).closest("tr").toggleClass("expanded")});window.onresize=function(a){let viewPortWidth=$(window).width();if(viewPortWidth>1023){$("table.fusion-table tr").removeClass("expanded")}}},applyFilter:function(a){$("#apply_filter").bind("click",function(b){b.preventDefault();b.stopPropagation();let current_val=$("#filter_actions").val();let confirmation=function(d,c){let has_confirmation;$.each(d,function(e,f){if(e==c){if(confirm(f)){$("#table_action").val(c);$("#table_frm").submit()}has_confirmation=true}});if(!has_confirmation){$("#table_action").val(c);$("#table_frm").submit()}}confirmation(a,current_val)})},masterCheck:function(){$("#chk_all, #chk_all2").bind("click",function(a){let val=$(this).is(":checked")?1:0;setChecked("table_frm","id[]",val);setChecked("table_frm","chk_all",val);setChecked("table_frm","chk_all2",val)})},fetchQuickEdit:function(d,b,a,c){let data={table_col:d,table_key:b,table_db:a};$.ajax({url:INCLUDES+"jquery/tables/table-fetch.php",type:"GET",data:data,dataType:"json",error:function(f){console.log("Failed to fetch file")},complete:function(f,g){if(g=="success"){if(f.responseJSON.status=="success"){c(d,b,a,f.responseJSON)}}}})},quickEdit:function(b,c,a){$(".quick_edit").bind("click",function(d){d.preventDefault();let val={table_col:$(this).data("value"),table_key:c,table_db:a};let showQuickEdit=function(h,f,g,e){$("#qc-input #qc_id").val(h);$.each(e.data,function(j,i){$("#qc-input #"+j).val(i)});if(h){let qc_rows=$("#form-row-"+h+" > td");$("#qc-input").find('button[name*="cancel_quick_editor"]').val(h);$("#qc-input").clone().appendTo(qc_rows).show();$("#form-row-"+h).show();$("#entry-row-"+h).hide()}}phpfusion_tables.fetchQuickEdit(val.table_col,c,a,showQuickEdit)});$("body").on("click",'button[name*="cancel_quick_editor"]',function(d){d.preventDefault();let val=$(this).val();let qc_rows=$("#form-row-"+val+" > td");if(val){qc_rows.html("");$("#form-row-"+val).hide();$("#entry-row-"+val).show()}});$("body").on("click",'button[name*="save_quick_editor"]',function(d){d.preventDefault();let loader_ui=$(this).find(".qc-spinner");loader_ui.show();let fields={}let post_data={fusion_token:$("#table_frm").find('input[name*="fusion_token"]').val(),form_id:$("#table_frm").find('input[name*="form_id"]').val(),table_db:a,table_key:c}let row_id=$(this).closest("#qc-input").find("#qc_id").val();fields[c]=row_id;$.each(JSON.parse(b),function(f,e){fields[f]=$("#"+f).val()});post_data.table_fields=fields;let qc_rows=$("#form-row-"+row_id+" > td");$.ajax({data:post_data,method:"post",url:INCLUDES+"jquery/tables/table-update.php",dataType:"json",success:function(f){},error:function(f){console.log("Error fetching file")},complete:function(f,g){if(g=="success"){if(f.responseJSON.status=="success"){$.each(f.responseJSON.data,function(e,h){let s=$("#entry-row-"+row_id).find('[data-col="'+e+'"] span.value');s.html(h)});loader_ui.hide();qc_rows.html("");$("#form-row-"+row_id).hide();$("#entry-row-"+row_id).show()}else{console.log(f.responseJSON.error_message)}}}})})}};